<template name="externalSearch">
	<div class="content">
		<div class="title">
			<h2>{{_ "Knowledge_Base"}}</h2>
		</div>
		<div class="external-messages">
			{{#each messages}}
				<div class="external-message">
					{{#if redlinkQuery}}
                        <div class="external-message">
							<!--
                            <div class="knowledge-title">Tokens</div>
                            <div class="knowledge-informations-wrapper">
                                <ul class="token-container clearfix">
                                    <li class="token-list"><span class="token Date"><i class="icon-clock"></i> 28.06.2016 10:00 <span class="confidence">(90%)</span></span></li>
                                    <li class="token-list"><span class="token Train"><i class="icon-travel"></i> Zug <span class="confidence">(100%)</span></span></li>
                                    <li class="token-list"><span class="token Topic"><i class="icon-book"></i> Reiseplanung <span class="confidence">(98%)</span></span></li>
                                    <li class="token-list"><span class="token Place"><i class="icon-location"></i> Frankfurt <span class="confidence">(15%)</span></span></li>
                                    <li class="token-list"><span class="token Place"><i class="icon-location"></i> Mannheim <span class="confidence">(15%)</span></span></li>
                                </ul>
                            </div>
							!-->

							{{#each filledQueryTemplate}}
								{{#if dynamicTemplateExists}}
									{{>UI.dynamic template=queryTemplate }}
								{{else}}
									{{>dynamic_redlink_default  }}
								{{/if}}
							{{/each}}

							{{#if redlinkQuery}}
								<div class="knowledge-title">Queries</div>
								<div class="knowledge-queries-wrapper">
									{{#each redlinkQuery.queries}}
										<div class="knowledge-item">
											<span class="icon-wrapper"><i class="icon-link-ext"></i></span>
											<a class="knowledge-item-url" href="{{url}}" target="_blank">
												<span class="query-servicename">{{serviceName}}</span>
												<span class="confidence">{{confidence}}</span>
											</a>
										</div>
									{{/each}}
								</div>
							{{/if}}
                        </div>

					{{else}}
                        <button class="pick-message"><i class="icon-edit"></i></button>
						{{knowledgeProvider}} read failed
					{{/if}}
				</div>
			{{/each}}

		</div>
	</div>
</template>

<template name="dynamic_redlink_default">
    <div class="knowledge-title">{{filledQueryType}}</div>
    <div class="knowledge-informations-wrapper">
		{{#each filledQuerySlots }}
            <div class="knowledge-base-label">{{role}}</div>
            <div class="knowledge-base-value">{{clientValue}}</div>
		{{/each}}
    </div>
</template>

<template name="dynamic_redlink_Produkt">
    <div class="knowledge-title">Product: {{filledQueryType}}</div>
    <div class="knowledge-informations-wrapper">
        <div class="knowledge-base-label">Topic</div>
        <div class="knowledge-base-value">{{item 'topic'}}</div>
        <div class="knowledge-base-label">Product</div>
        <div class="knowledge-base-value">{{item 'product'}}</div>
    </div>
</template>

<template name="dynamic_redlink_Reiseplanung">
    <div class="knowledge-title">{{filledQueryType}}</div>
    <div class="knowledge-informations-wrapper">
		{{#each filledQuerySlots }}
            <div class="knowledge-base-label">{{role}}</div>
            <div class="knowledge-base-value">{{clientValue}}</div>
		{{/each}}
    </div>
</template>
